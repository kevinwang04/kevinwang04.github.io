<!DOCTYPE html>
<html>
<head>
	<title>My Blog——王欢的小站</title>
	<meta charset="utf-8">
	<link rel="icon" href="shortcut.png" type="image/png">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE-edge,chrome=1">
	<link rel="stylesheet" type="text/css" href="style/bootstrap.min.css">
	<link rel="stylesheet" href="font_icon/Font-Awesome-3.2.1/css/font-awesome.min.css">
   	<link rel="stylesheet" type="text/css" href="style/main.css">
   	<style type="text/css">
		#body { margin: 0; padding: 0; position: relative; background-image: url(http://demo.lanrenzhijia.com/2015/snow0112/images/xh.jpg); background-position: center; /*background-repeat: no-repeat;*/ width: 100%; height: 100%; background-size: 100% 100%; }
	</style>	
   	
</head>
<body>
<!-- 进行了一次大的页面布局调整，重构了一下页面结构，，去掉了侧边栏和footer,改为下滑式导航 -->
	<div class="all_wrap">
		<div class="container-fluid side_bar">
			<div class="row">
				<div class=" col-xs-4 col-md-4 text-center home_wrap"><i class="icon-home" class="tooltip-test" data-toggle="tooltip" data-placement="right" title="back home"></i></div>
				<div class=" col-xs-4 col-md-4 text-center home_wrap"><i class="icon-list-alt" data-toggle="tooltip" data-placement="right" title="my works"></i></div>
				<div class=" col-xs-4 col-md-4 text-center home_wrap"><i class="icon-user" data-toggle="tooltip" data-placement="right" title="about me"></i></div>
			</div>
		</div>
		<div class="ul_wrap">
				<ul>
					<!-- 这是第一个页面部分 -->
					<li class="pages">	
					
							<div id="welcome_context">
								<!-- 这是实现开关按钮 -->
								<div class="nav_icon" id="nav_icon">
										<span></span>
										<span></span>
										<span></span>
								</div>

								<h1 class="text-center" id="name">Kevin Wang</h1>
								<h3 class="text-center">interested in <strong class="text-primary strong">web</strong> & <strong class="text-primary strong">android</strong> developing</h3>
								<img src="index_img/show_me.png" alt="it's real me" class="img-circle center-block">
								<div class="row">
									<div class="col-xs-12 col-md-3 col-md-offset-3 contact_me text-center" ><h4><a href="mailto:kavinwang04@gmail.com">kavinwang04@gmail<i class="icon-envelope-alt"></i></a></h4></div>
								  	<div class="col-xs-12 col-md-3 text-center"><h4><a href="https://github.com/kevinwang04"><i class="icon-github"></i>contact me on github</a></h4></div>
							  	</div>
							</div>
							<div class="work_wrap center-block">
							    	<div class="row work_on">
							    		<h1 class="text-center uppercase" >what do I work on right now</h1>
								  		<div class="col-xs-12 col-md-4 text-center border-right">
								  			<div class="icon text-info"><i class="icon-laptop work_icon"></i></div>
								  			<h3>WEB DEVELOPEMENT</h3>
								  			<p>skljfklsdjfsdfjsdjfjfkfkljf</p>
								  		</div>
								 	 	<div class="col-xs-12 col-md-4 text-center border-right">
								 	 		<div class="icon text-info"><i class="icon-mobile-phone work_icon"></i></div>
								 	 		<h3>ANDROID DEVELOPEMENT</h3>
								 	 		<p>sfdjlskjdfjlsdjlfjlskdj;f</p>
								 	 	</div>
								 	 	<div class="col-xs-12 col-md-4 text-center ">
								 	 		<div class="icon text-info"><i class="icon-book work_icon"></i></div>
								 	 		<h3 class="uppercase">school works</h3>
								 	 		<p>sfdjlskjdfjlsdjlfjlskdj;f</p>
								 	 	</div>
									</div>
							</div>	
							<div class="container footer">
					    		<div class="row">
					    			<div class="col-xs-12 col-md-4 col-md-offset-4 text-center">
					    				<ul class="list-inline">
					    					<li><a href="javascript:void();" class="white"><h4 class="uppercase">about me</h4></a></li>
					    					<li><a href="javascript:void();" class="white"><h4 class="uppercase">my work</h4></a></li>
					    					<li><a href="javascript:void();" class="white"><h4 class="uppercase">home</h4></a></li>
					    				</ul>
					    			</div>
					    			<div class="col-xs-12 col-md-4 col-md-offset-4 text-center">
					    				<ul class="list-inline">
					    					<li><a href="https://www.linkedin.com/profile/view?id=325284454&trk=hp-identity-name" class="white"><i class="icon-linkedin-sign footer_icon"></i></a></li>
					    					<li><a href="javascript:void();" class="white"><i class="icon-twitter-sign footer_icon"></i></a></li>
					    					<li><a href="https://github.com/kevinwang04" class="white"><i class="icon-github footer_icon"></i></a></li>
					    				</ul>
					    			</div>
					    			<div class="col-xs-12 col-md-4 col-md-offset-4 text-center">
					    				<h4 class="text-center">© 2015 · KEVIN WANG · ALL RIGHTS RESERVED</h4>
							    		<h5 class="text-center">STAY HUNGRY · STAY FOOLISH   </h5>
										<h5 class="text-center"><a href="old_blog/old_index.html">WELCOME TO BLOG 1.0</a></h5>
					    			</div>
					    			
				    		</div>

						    
					</li>

					<!-- 这是第二个页面 -->
					<li class="pages"  id="body" onload="init()">
						<div class="my_work" style="width:100%;border:2px solid blue;"></div>
					</li>

					<!-- 第三个页面 -->
					<li class="pages">
						<div class="my_work" style="width:100%;border:2px solid blue;">
							<div class="row">
			    				<div class="col-xs-12 col-md-4 col-md-offset-4 text-center">
			    				<ul class="list-inline">
			    					<li><a href="https://www.linkedin.com/profile/view?id=325284454&trk=hp-identity-name" class="white"><i class="icon-linkedin-sign footer_icon"></i></a></li>
									<li><a href="https://github.com/kevinwang04" class="white"><i class="icon-github footer_icon"></i></a></li>
			    					<li><a href="javascript:void();" class="white"><i class="icon-twitter-sign footer_icon"></i></a></li>
			    				</ul>
			    				</div>
			    			</div>
							
						</div>
					</li>
				</ul>
			</div>		  
	</div>
	<script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
	<script type="text/javascript" src="js/main.js"></script>   
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script src="http://www.lanrenzhijia.com/ajaxjs/ThreeCanvas.js"></script>
	<script src="http://www.lanrenzhijia.com/ajaxjs/Snow.js"></script>
	<script type="text/javascript">
	var SCREEN_WIDTH = window.innerWidth;//
	var SCREEN_HEIGHT = window.innerHeight;
	var container;
	var particle;//粒子

	var camera;
	var scene;
	var renderer;

	var starSnow = 1;

	var particles = []; 

	var particleImage = new Image();
	//THREE.ImageUtils.loadTexture( "img/ParticleSmoke.png" );
	particleImage.src = 'http://demo.lanrenzhijia.com/2015/snow0112/images/ParticleSmoke.png'; 
	

	function init() {
		//alert("message3");
		container = document.createElement('div');//container：画布实例;
		document.body.appendChild(container);

		camera = new THREE.PerspectiveCamera( 60, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000 );
		camera.position.z = 1000;
		//camera.position.y = 50;

		scene = new THREE.Scene();
		scene.add(camera);
			
		renderer = new THREE.CanvasRenderer();
		renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);
		var material = new THREE.ParticleBasicMaterial( { map: new THREE.Texture(particleImage) } );
			//alert("message2");
		for (var i = 0; i < 500; i++) {
			//alert("message");
			particle = new Particle3D( material);
			particle.position.x = Math.random() * 2000-1000;
			
			particle.position.z = Math.random() * 2000-1000;
			particle.position.y = Math.random() * 2000-1000;
			//particle.position.y = Math.random() * (1600-particle.position.z)-1000;
			particle.scale.x = particle.scale.y =  1;
			scene.add( particle );
			
			particles.push(particle); 
		}

		container.appendChild( renderer.domElement );


		//document.addEventListener( 'mousemove', onDocumentMouseMove, false );
		document.addEventListener( 'touchstart', onDocumentTouchStart, false );
		document.addEventListener( 'touchmove', onDocumentTouchMove, false );
		document.addEventListener( 'touchend', onDocumentTouchEnd, false );
		
		setInterval( loop, 1000 / 60 );
		
	}

	var touchStartX;
	var touchFlag = 0;//储存当前是否滑动的状态;
	var touchSensitive = 80;//检测滑动的灵敏度;
	//var touchStartY;
	//var touchEndX;
	//var touchEndY;
	function onDocumentTouchStart( event ) {

		if ( event.touches.length == 1 ) {

			event.preventDefault();//取消默认关联动作;
			touchStartX = 0;
			touchStartX = event.touches[ 0 ].pageX ;
			//touchStartY = event.touches[ 0 ].pageY ;
		}
	}


	function onDocumentTouchMove( event ) {

		if ( event.touches.length == 1 ) {
			event.preventDefault();
			var direction = event.touches[ 0 ].pageX - touchStartX;
			if (Math.abs(direction) > touchSensitive) {
				if (direction>0) {touchFlag = 1;}
				else if (direction<0) {touchFlag = -1;};
				//changeAndBack(touchFlag);
			}	
		}
	}

	function onDocumentTouchEnd (event) {
		// if ( event.touches.length == 0 ) {
		// 	event.preventDefault();
		// 	touchEndX = event.touches[ 0 ].pageX ;
		// 	touchEndY = event.touches[ 0 ].pageY ;
	
		// }这里存在问题
		var direction = event.changedTouches[ 0 ].pageX - touchStartX;

		changeAndBack(touchFlag);
	}


	function changeAndBack (touchFlag) {
		var speedX = 25*touchFlag;
		touchFlag = 0;
		for (var i = 0; i < particles.length; i++) {
			particles[i].velocity=new THREE.Vector3(speedX,-10,0);
		}
		var timeOut = setTimeout(";", 800);
		clearTimeout(timeOut);

		var clearI = setInterval(function () {
			if (touchFlag) {
				clearInterval(clearI);
				return;
			};
			speedX*=0.8;

			if (Math.abs(speedX)<=1.5) {
				speedX=0;
				clearInterval(clearI);
			};
			
			for (var i = 0; i < particles.length; i++) {
				particles[i].velocity=new THREE.Vector3(speedX,-10,0);
			}
		},100);


	}


	function loop() {
		for(var i = 0; i<particles.length; i++){
			var particle = particles[i]; 
			particle.updatePhysics(); 

			with(particle.position)
			{
				if((y<-1000)&&starSnow) {y+=2000;}

				if(x>1000) x-=2000; 
				else if(x<-1000) x+=2000;
				if(z>1000) z-=2000; 
				else if(z<-1000) z+=2000;
			}			
		}

		camera.lookAt(scene.position); 

		renderer.render( scene, camera );
	}
</script>
	<!--<script type="text/javascript" src="https://apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>-->
</body>
</html>